apiVersion: nfs.rook.io/v1alpha1
kind: NFSServer
{% include common_path + '/metadata.j2' ignore missing %}
spec:
  replicas: 1
  exports:
    - name: "{{ server_export_name }}"
      server:
        accessMode: "{{ server_export_access_mode }}"
        squash: "{{ server_export_squash }}"
      # A Persistent Volume Claim must be created before creating NFS CRD instance.
      persistentVolumeClaim:
        claimName: {{ server_export_pvc }}
{% if server_spec_annotations is defined and server_spec_annotations %}
  annotations:
    {{ server_spec_annotations | to_nice_yaml(indent=2) | indent(4) }}
{% endif %}
